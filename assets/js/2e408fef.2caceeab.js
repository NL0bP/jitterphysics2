"use strict";(self.webpackChunkjitterphysics=self.webpackChunkjitterphysics||[]).push([[95],{2101:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});var i=t(4848),s=t(8453);const a={},o="Constraints",r={id:"documentation/04constraints",title:"Constraints",description:"Constraints constraint various degrees of freedom of rigid bodies.",source:"@site/docs/02_documentation/04constraints.md",sourceDirName:"02_documentation",slug:"/documentation/04constraints",permalink:"/docs/documentation/04constraints",draft:!1,unlisted:!1,editUrl:"https://github.com/notgiven688/jitterphysics2/tree/main/docs/docs/02_documentation/04constraints.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Shapes",permalink:"/docs/documentation/03shapes"},next:{title:"Dynamic tree",permalink:"/docs/documentation/05dynamictree"}},l={},c=[{value:"Default constraints",id:"default-constraints",level:2},{value:"Creating constraints",id:"creating-constraints",level:2},{value:"Example: Hinge joint",id:"example-hinge-joint",level:3},{value:"Fixed constraints",id:"fixed-constraints",level:3},{value:"Softness and Bias",id:"softness-and-bias",level:3},{value:"Enable/Disable constraints",id:"enabledisable-constraints",level:3}];function d(n){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.h1,{id:"constraints",children:"Constraints"}),"\n",(0,i.jsx)(e.p,{children:"Constraints constraint various degrees of freedom of rigid bodies.\nIn Jitter, constraints always act between two bodies.\nA joint is a collection of multiple constraints, so it may act on multiple bodies."}),"\n",(0,i.jsx)(e.h2,{id:"default-constraints",children:"Default constraints"}),"\n",(0,i.jsx)(e.p,{children:"Default constraints available are:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:"AngularMotor, BallSocket, ConeLimit, DistanceLimit, FixedAngle, HingeAngle, LinearMotor, PointOnLine, PointOnPlane, TwistAngle, SpringConstraint\n"})}),"\n",(0,i.jsx)(e.p,{children:"Available joints:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-text",children:"HingeJoint, PrismaticJoint, UniversalJoint\n"})}),"\n",(0,i.jsx)(e.h2,{id:"creating-constraints",children:"Creating constraints"}),"\n",(0,i.jsx)(e.p,{children:"Similar to rigid bodies but unlike shapes, constraints are instantiated through a create method in the world class:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cs",children:"var constraint = world.CreateConstraint<ConstraintType>(body1, body2);\n"})}),"\n",(0,i.jsxs)(e.p,{children:["Jitter allocates and assigns unmanaged memory to constraints internally, allowing them to be used like regular classes.\nThe solver interacts with unmanaged memory structures of type ",(0,i.jsx)(e.code,{children:"ConstraintData"})," (256 bytes) or ",(0,i.jsx)(e.code,{children:"SmallConstraintData"})," (128 bytes), depending on whether ",(0,i.jsx)(e.code,{children:"constraint.IsSmallConstraint"})," is set.\nSmall constraints are designed for simpler constraints with a smaller memory footprint, such as spring constraints for soft bodies."]}),"\n",(0,i.jsx)(e.admonition,{title:"Constraint Initialization",type:"danger",children:(0,i.jsxs)(e.p,{children:["For all default constraints in Jitter, ",(0,i.jsx)(e.code,{children:"constraint.Initialize"})," must be called once after ",(0,i.jsx)(e.code,{children:"world.CreateConstraint"}),"."]})}),"\n",(0,i.jsx)(e.h3,{id:"example-hinge-joint",children:"Example: Hinge joint"}),"\n",(0,i.jsxs)(e.p,{children:["A swinging door may be implemented by a combination of two constraints: A ",(0,i.jsx)(e.code,{children:"HingeAngle"})," constraint which removes two degrees of angular freedom (i.e. the bodies can only rotate around a single axis), and a ",(0,i.jsx)(e.code,{children:"BallSocket"})," constraint removing all three degrees of freedom (there is no translation possible):"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cs",children:"var hingeAngle = world.CreateConstraint<HingeAngle>(body1, body2);\nhingeAngle.Initialize(hingeAxis, AngularLimit.Full);\n\nvar ballSocket = world.CreateConstraint<BallSocket>(body1, body2);\nballSocket.Initialize(hingeCenter);\n"})}),"\n",(0,i.jsxs)(e.p,{children:["Alternatively the ",(0,i.jsx)(e.code,{children:"HingeJoint"})," might be used for convenience:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cs",children:"var hinge = new HingeJoint(world, body1, body2, hingeCenter, hingeAxis);\n"})}),"\n",(0,i.jsx)(e.h3,{id:"fixed-constraints",children:"Fixed constraints"}),"\n",(0,i.jsxs)(e.p,{children:["To constrain a rigid body relative to world space, use ",(0,i.jsx)(e.code,{children:"world.NullBody"})," as one of the bodies.\nFor example, to keep a capsule upright, a constraint can be set up as follows:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cs",children:"var upright = world.CreateConstraint<HingeAngle>(capsule, world.NullBody);\nupright.Initialize(JVector.UnitY, AngularLimit.Full);\n"})}),"\n",(0,i.jsx)(e.h3,{id:"softness-and-bias",children:"Softness and Bias"}),"\n",(0,i.jsxs)(e.p,{children:["For most constraints a softness and bias value can be set.\nThese values define how strict the constraint limits are enforced.\nSofter constraints might improve simulation stability but do not fully enforce the constraint limits.\nThe softness and bias parameters can be tweaked for optimal results.\nBetter constraint behaviour can also be archived by sub-stepping, see ",(0,i.jsx)(e.a,{href:"/docs/documentation/01world",children:"world.Step"}),"."]}),"\n",(0,i.jsx)(e.h3,{id:"enabledisable-constraints",children:"Enable/Disable constraints"}),"\n",(0,i.jsxs)(e.p,{children:["Constraints can be temporarily enabled or disables using ",(0,i.jsx)(e.code,{children:"constraint.IsEnabled"}),"."]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>r});var i=t(6540);const s={},a=i.createContext(s);function o(n){const e=i.useContext(a);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),i.createElement(a.Provider,{value:e},n.children)}}}]);